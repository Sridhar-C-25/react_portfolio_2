var x=e=>typeof e=="function",p=(e,t)=>x(e)?e(t):e;var E=(()=>{let e=0;return()=>(++e).toString()})(),X=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})();import{useEffect as R,useState as V}from"react";var I=20;var m=new Map,v=1e3,b=e=>{if(m.has(e))return;let t=setTimeout(()=>{m.delete(e),T({type:4,toastId:e})},v);m.set(e,t)},M=e=>{let t=m.get(e);t&&clearTimeout(t)},g=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,I)};case 1:return t.toast.id&&M(t.toast.id),{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case 2:let{toast:o}=t;return e.toasts.find(r=>r.id===o.id)?g(e,{type:1,toast:o}):g(e,{type:0,toast:o});case 3:let{toastId:n}=t;return n?b(n):e.toasts.forEach(r=>{b(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,visible:!1}:r)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(r=>({...r,pauseDuration:r.pauseDuration+s}))}}},f=[],S={toasts:[],pausedAt:void 0},T=e=>{S=g(S,e),f.forEach(t=>{t(S)})},U={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},O=(e={})=>{let[t,o]=V(S);R(()=>(f.push(o),()=>{let s=f.indexOf(o);s>-1&&f.splice(s,1)}),[t]);let n=t.toasts.map(s=>{var r,c;return{...e,...e[s.type],...s,duration:s.duration||((r=e[s.type])==null?void 0:r.duration)||(e==null?void 0:e.duration)||U[s.type],style:{...e.style,...(c=e[s.type])==null?void 0:c.style,...s.style}}});return{...t,toasts:n}};var w=(e,t="blank",o)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...o,id:(o==null?void 0:o.id)||E()}),l=e=>(t,o)=>{let n=w(t,e,o);return T({type:2,toast:n}),n.id},a=(e,t)=>l("blank")(e,t);a.error=l("error");a.success=l("success");a.loading=l("loading");a.custom=l("custom");a.dismiss=e=>{T({type:3,toastId:e})};a.remove=e=>T({type:4,toastId:e});a.promise=(e,t,o)=>{let n=a.loading(t.loading,{...o,...o==null?void 0:o.loading});return e.then(s=>(a.success(p(t.success,s),{id:n,...o,...o==null?void 0:o.success}),s)).catch(s=>{a.error(p(t.error,s),{id:n,...o,...o==null?void 0:o.error})}),e};import{useEffect as N,useCallback as h}from"react";var k=(e,t)=>{T({type:1,toast:{id:e,height:t}})},C=()=>{T({type:5,time:Date.now()})},H=e=>{let{toasts:t,pausedAt:o}=O(e);N(()=>{if(o)return;let r=Date.now(),c=t.map(i=>{if(i.duration===1/0)return;let d=(i.duration||0)+i.pauseDuration-(r-i.createdAt);if(d<0){i.visible&&a.dismiss(i.id);return}return setTimeout(()=>a.dismiss(i.id),d)});return()=>{c.forEach(i=>i&&clearTimeout(i))}},[t,o]);let n=h(()=>{o&&T({type:6,time:Date.now()})},[o]),s=h((r,c)=>{let{reverseOrder:i=!1,gutter:d=8,defaultPosition:P}=c||{},A=t.filter(u=>(u.position||P)===(r.position||P)&&u.height),_=A.findIndex(u=>u.id===r.id),D=A.filter((u,y)=>y<_&&u.visible).length;return A.filter(u=>u.visible).slice(...i?[D+1]:[0,D]).reduce((u,y)=>u+(y.height||0)+d,0)},[t]);return{toasts:t,handlers:{updateHeight:k,startPause:C,endPause:n,calculateOffset:s}}};var ie=a;export{ie as default,p as resolveValue,a as toast,H as useToaster,O as useToasterStore};
//# sourceMappingURL=index.mjs.map